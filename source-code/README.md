# AI News Notification System

ä¸€ä¸ªç®€å•é«˜æ•ˆçš„AIæ—©æŠ¥é€šçŸ¥ç³»ç»Ÿï¼Œç›‘æ§Bilibili UPä¸»æ©˜é¸¦Juyaçš„AIæ—©æŠ¥åˆé›†ï¼Œå¹¶é€šè¿‡ä¼ä¸šå¾®ä¿¡æœºå™¨äººè‡ªåŠ¨æ¨é€æ›´æ–°é€šçŸ¥ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– **è‡ªåŠ¨ç›‘æ§**: å®šæ—¶ç›‘æ§Bilibili UPä¸»çš„AIæ—©æŠ¥è§†é¢‘æ›´æ–°
- ğŸ“± **å³æ—¶é€šçŸ¥**: é€šè¿‡ä¼ä¸šå¾®ä¿¡æœºå™¨äººç¬¬ä¸€æ—¶é—´æ¨é€é€šçŸ¥
- ğŸ“‹ **æ™ºèƒ½æ‘˜è¦**: è‡ªåŠ¨æå–è§†é¢‘ä¿¡æ¯å¹¶ç”Ÿæˆç®€æ´æ‘˜è¦
- ğŸ”„ **å»é‡æœºåˆ¶**: é¿å…é‡å¤æ¨é€å·²å¤„ç†çš„è§†é¢‘
- ğŸ› ï¸ **æ˜“äºé…ç½®**: ç®€å•çš„ç¯å¢ƒå˜é‡é…ç½®
- ğŸ“Š **çŠ¶æ€ç›‘æ§**: æ”¯æŒæŸ¥çœ‹ç³»ç»Ÿè¿è¡ŒçŠ¶æ€
- ğŸ§ª **æµ‹è¯•æ¨¡å¼**: æä¾›å¤šç§è¿è¡Œæ¨¡å¼ä¾¿äºè°ƒè¯•

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Bilibili      â”‚    â”‚  Content         â”‚    â”‚  WeChat Work    â”‚
â”‚   Monitor       â”‚â”€â”€â”€â–¶â”‚  Summarizer      â”‚â”€â”€â”€â–¶â”‚  Notifier       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                        â”‚                       â”‚
         â–¼                        â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Data Manager   â”‚    â”‚    Scheduler     â”‚    â”‚   Log System    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone <your-repo-url>
cd ai-news-notification/source-code

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶å¡«å…¥é…ç½®ï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```env
# ä¼ä¸šå¾®ä¿¡æœºå™¨äºº Webhook URL
WECHAT_WEBHOOK_URL=https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_ACTUAL_BOT_KEY

# Bilibili UPä¸» ID (æ©˜é¸¦Juyaï¼Œé»˜è®¤å·²è®¾ç½®)
BILIBILI_UP_UID=285286947

# æ£€æŸ¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰
CHECK_INTERVAL=30

# æ—¥å¿—çº§åˆ«
LOG_LEVEL=INFO
```

### 3. è·å–ä¼ä¸šå¾®ä¿¡æœºå™¨äºº Webhook

1. åœ¨ä¼ä¸šå¾®ä¿¡ç¾¤ä¸­æ·»åŠ æœºå™¨äºº
2. å¤åˆ¶æœºå™¨äººçš„ Webhook URL
3. å°† URL ä¸­çš„ `key` å‚æ•°å€¼æ›¿æ¢åˆ° `.env` æ–‡ä»¶ä¸­

### 4. è¿è¡Œç³»ç»Ÿ

```bash
# æµ‹è¯•é…ç½®
python main.py --mode test

# å•æ¬¡æ£€æŸ¥
python main.py --mode check

# æŒç»­è¿è¡Œï¼ˆé»˜è®¤æ¨¡å¼ï¼‰
python main.py --mode run

# æŸ¥çœ‹çŠ¶æ€
python main.py --mode status

# å¼ºåˆ¶æ£€æŸ¥æœ€è¿‘è§†é¢‘
python main.py --mode force
```

## è¿è¡Œæ¨¡å¼è¯´æ˜

| æ¨¡å¼ | æè¿° | ä½¿ç”¨åœºæ™¯ |
|------|------|----------|
| `run` | æŒç»­è¿è¡Œï¼Œå®šæ—¶æ£€æŸ¥ | ç”Ÿäº§ç¯å¢ƒ |
| `test` | å‘é€æµ‹è¯•æ¶ˆæ¯ | éªŒè¯é…ç½® |
| `check` | æ‰§è¡Œä¸€æ¬¡æ£€æŸ¥ | æ‰‹åŠ¨è§¦å‘ |
| `status` | æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€ | ç›‘æ§è°ƒè¯• |
| `force` | å¼ºåˆ¶æ£€æŸ¥æœ€æ–°è§†é¢‘ | åˆå§‹åŒ–æˆ–è°ƒè¯• |

## é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡

| å˜é‡å | æè¿° | é»˜è®¤å€¼ | å¿…éœ€ |
|--------|------|--------|------|
| `WECHAT_WEBHOOK_URL` | ä¼ä¸šå¾®ä¿¡æœºå™¨äºº Webhook | æ—  | âœ… |
| `BILIBILI_UP_UID` | Bilibili UPä¸» UID | 285286947 | âŒ |
| `CHECK_INTERVAL` | æ£€æŸ¥é—´éš”ï¼ˆåˆ†é’Ÿï¼‰ | 30 | âŒ |
| `LOG_LEVEL` | æ—¥å¿—çº§åˆ« | INFO | âŒ |

### æ•°æ®å­˜å‚¨

ç³»ç»Ÿä½¿ç”¨ç®€å•çš„æ–‡ä»¶å­˜å‚¨ï¼š

- `data/processed_videos.txt`: å·²å¤„ç†çš„è§†é¢‘IDåˆ—è¡¨
- `logs/`: æ—¥å¿—æ–‡ä»¶ç›®å½•

## é¡¹ç›®ç»“æ„

```
source-code/
â”œâ”€â”€ main.py                 # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ scheduler.py            # è°ƒåº¦å™¨
â”œâ”€â”€ bilibili_monitor.py     # Bilibiliç›‘æ§å™¨
â”œâ”€â”€ content_summarizer.py   # å†…å®¹æ‘˜è¦å™¨
â”œâ”€â”€ wechat_notifier.py      # ä¼ä¸šå¾®ä¿¡é€šçŸ¥å™¨
â”œâ”€â”€ data_manager.py         # æ•°æ®ç®¡ç†å™¨
â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”œâ”€â”€ requirements.txt       # Pythonä¾èµ–
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .env                  # ç¯å¢ƒå˜é‡é…ç½®ï¼ˆéœ€è‡ªè¡Œåˆ›å»ºï¼‰
â”œâ”€â”€ data/                 # æ•°æ®å­˜å‚¨ç›®å½•
â”œâ”€â”€ logs/                 # æ—¥å¿—æ–‡ä»¶ç›®å½•
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## éƒ¨ç½²å»ºè®®

### æœ¬åœ°å¼€å‘

```bash
# å¼€å‘æ¨¡å¼è¿è¡Œ
python main.py --mode test --log-level DEBUG
```

### ç”Ÿäº§éƒ¨ç½²

#### æ–¹å¼1: ç›´æ¥è¿è¡Œ

```bash
# åå°è¿è¡Œ
nohup python main.py --mode run > /dev/null 2>&1 &

# æˆ–ä½¿ç”¨ screen
screen -S ai-news python main.py --mode run
```

#### æ–¹å¼2: ä½¿ç”¨ systemd (Linux)

åˆ›å»ºæœåŠ¡æ–‡ä»¶ `/etc/systemd/system/ai-news.service`:

```ini
[Unit]
Description=AI News Notification System
After=network.target

[Service]
Type=simple
User=your-user
WorkingDirectory=/path/to/ai-news-notification/source-code
ExecStart=/usr/bin/python3 main.py --mode run
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯åŠ¨æœåŠ¡ï¼š

```bash
sudo systemctl enable ai-news
sudo systemctl start ai-news
sudo systemctl status ai-news
```

#### æ–¹å¼3: ä½¿ç”¨ Docker

```dockerfile
FROM python:3.9-slim

WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt

COPY . .

CMD ["python", "main.py", "--mode", "run"]
```

### ç›‘æ§å’Œç»´æŠ¤

```bash
# æŸ¥çœ‹æ—¥å¿—
tail -f logs/ai_news_$(date +%Y%m%d).log

# æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
python main.py --mode status

# æ‰‹åŠ¨è§¦å‘æ£€æŸ¥
python main.py --mode check
```

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ä¼ä¸šå¾®ä¿¡é€šçŸ¥å¤±è´¥**
   - æ£€æŸ¥ Webhook URL æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æœºå™¨äººæ˜¯å¦åœ¨ç›®æ ‡ç¾¤ç»„ä¸­
   - éªŒè¯ç½‘ç»œè¿æ¥

2. **æ— æ³•è·å–è§†é¢‘ä¿¡æ¯**
   - æ£€æŸ¥ç½‘ç»œè¿æ¥
   - ç¡®è®¤ Bilibili API å¯è®¿é—®
   - éªŒè¯ UPä¸» UID æ˜¯å¦æ­£ç¡®

3. **é‡å¤é€šçŸ¥**
   - æ£€æŸ¥ `data/processed_videos.txt` æ–‡ä»¶
   - ç¡®è®¤æ•°æ®ç®¡ç†å™¨æ­£å¸¸å·¥ä½œ

### æ—¥å¿—çº§åˆ«

- `DEBUG`: è¯¦ç»†è°ƒè¯•ä¿¡æ¯
- `INFO`: ä¸€èˆ¬è¿è¡Œä¿¡æ¯ï¼ˆæ¨èï¼‰
- `WARNING`: è­¦å‘Šä¿¡æ¯
- `ERROR`: é”™è¯¯ä¿¡æ¯

## æ‰©å±•åŠŸèƒ½

### æ·»åŠ æ–°çš„ä¿¡æ¯æº

1. åˆ›å»ºæ–°çš„ç›‘æ§å™¨ç±»ï¼ˆå‚è€ƒ `bilibili_monitor.py`ï¼‰
2. åœ¨ `scheduler.py` ä¸­é›†æˆæ–°çš„ç›‘æ§å™¨
3. æ›´æ–°é…ç½®æ–‡ä»¶æ·»åŠ ç›¸å…³é…ç½®

### è‡ªå®šä¹‰é€šçŸ¥æ ¼å¼

ä¿®æ”¹ `content_summarizer.py` ä¸­çš„ `generate_summary` æ–¹æ³•æ¥è‡ªå®šä¹‰é€šçŸ¥å†…å®¹æ ¼å¼ã€‚

### æ·»åŠ æ–°çš„é€šçŸ¥æ¸ é“

å‚è€ƒ `wechat_notifier.py` åˆ›å»ºæ–°çš„é€šçŸ¥å™¨ç±»ï¼Œæ”¯æŒå…¶ä»–å¹³å°å¦‚é’‰é’‰ã€Slack ç­‰ã€‚

## è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤å˜æ›´
4. åˆ›å»º Pull Request

## è®¸å¯è¯

MIT License

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»ç»´æŠ¤è€…ã€‚
